(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{27:function(e,t,a){},30:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(19),r=a.n(n),l=a(9),o=(a(27),a(28),a(3)),i=a(0),d=function(){return Object(i.jsx)("div",{className:"navbar is-dark has-shadow",children:Object(i.jsxs)("nav",{className:"navbar-brand",children:[Object(i.jsx)(l.c,{to:"",className:function(e){return"navbar-item ".concat(e.isActive?"active":"")},children:"Home"}),Object(i.jsx)(l.c,{to:"people",className:function(e){return"navbar-item ".concat(e.isActive?"active":"")},children:"People"})]})})},j=(a(30),function(){return Object(i.jsx)("div",{className:"homepage__container",children:Object(i.jsx)("h1",{className:"title",children:"Home Page"})})}),b=a(7),m=a(20),u=a.n(m),h=(a(42),a(2)),O=(a(43),a(8)),p=a.n(O),x=a(12),f=(a(44),a(21)),N=(a(45),function(e){var t=e.personData,a=Object(o.f)().search;return Object(i.jsx)(f.a,{selector:"#".concat(t.slug),smooth:!0,scrollOptions:{block:"center"},children:Object(i.jsx)(l.b,{to:{pathname:"/people/".concat(t.slug),search:a},className:p()("m"===t.sex?"male":"female"),children:t.name})})}),v=["mother","father"],g=function(e){var t=e.mother,a=e.father,c=Object(x.a)(e,v),s=Object(o.h)().selectedSlug,n=Object(o.f)(),r=new URLSearchParams(n.search).get("sortBy")||"";return Object(i.jsx)("tr",{id:c.slug,className:p()("Person",{"person-selected":c.slug===s}),children:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("td",{className:p()("person-name",{sorted_column:"name"===r}),children:Object(i.jsx)(N,{personData:c})}),Object(i.jsx)("td",{className:p()("person-sex",{sorted_column:"sex"===r}),children:"f"===c.sex?"Female":"Male"}),Object(i.jsx)("td",{className:p()("person-born",{sorted_column:"born"===r}),children:c.born}),Object(i.jsx)("td",{className:p()("person-died",{sorted_column:"died"===r}),children:c.died}),Object(i.jsx)("td",{className:p()("person-mother",{"not-found":"no data"===t}),children:"no data"!==t?Object(i.jsx)(N,{personData:t}):c.motherName||"No data"}),Object(i.jsx)("td",{className:p()("person-father",{"not-found":"no data"===a}),children:"no data"!==a?Object(i.jsx)(N,{personData:a}):c.fatherName||"No data"})]})},c.slug)},y=function(e){var t,a=e.people,c=Object(o.f)(),s=Object(o.g)(),n=new URLSearchParams(c.search),r=n.get("sortBy")||"",l=n.get("sortOrder")||"";return t=r?a.sort((function(e,t){switch(r){case"name":case"sex":return"asc"===l?e[r].localeCompare(t[r]):t[r].localeCompare(e[r]);case"born":case"died":return"asc"===l?e[r]-t[r]:t[r]-e[r];default:return 0}})):a,Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("table",{className:"table",children:[Object(i.jsx)("thead",{className:"table__headers",children:Object(i.jsxs)("tr",{children:[["Name","Sex","Born","Died"].map((function(e){return Object(i.jsx)("th",{className:p()("sortBy__item",{sortBy__item_sort_asc:"asc"===l&&r===e.toLowerCase(),sortBy__item_sort_desc:"desc"===l&&r===e.toLowerCase(),sorted_column:r===e.toLowerCase()}),onClick:function(){return function(e){n.set("sortBy",e),n.set("sortOrder","asc"!==l?"asc":"desc"),s("?".concat(n.toString()))}(e.toLowerCase())},children:e})})),Object(i.jsx)("th",{className:"",children:"Mother"}),Object(i.jsx)("th",{className:"",children:"Father"})]})}),Object(i.jsx)("tbody",{children:t.map((function(e){return Object(i.jsx)(g,Object(h.a)(Object(h.a)({},e),{},{mother:a.find((function(t){return e.motherName===t.name}))||"no data",father:a.find((function(t){return e.fatherName===t.name}))||"no data"}))}))})]})})},_=s.a.createContext({people:[],setPeople:function(){}}),w=function(e){var t=e.children,a=Object(c.useState)([]),s=Object(b.a)(a,2),n=s[0],r=s[1];Object(c.useEffect)((function(){fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]);var l=Object(c.useMemo)((function(){return{people:n,setPeople:r}}),[n]);return Object(i.jsx)(_.Provider,{value:l,children:t})},C=function(){var e,t=Object(c.useContext)(_).people,a=Object(o.f)(),s=Object(o.g)(),n=new URLSearchParams(a.search),r=n.get("query")||"",d=Object(c.useState)(r),j=Object(b.a)(d,2),m=j[0],h=j[1],O=n.get("filterBy")||"",p=Object(c.useCallback)(u()((function(e){e?n.set("query",e):n.delete("query"),s("?".concat(n.toString()))}),500),[]);return e=r&&O?t.filter((function(e){return null!==e[O]&&e[O].toLowerCase().includes(r)})):t,Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"title__container",children:Object(i.jsx)("h1",{className:"title",children:"People page"})}),Object(i.jsxs)("div",{className:"input__container",children:[Object(i.jsx)("label",{className:"label",id:"name",children:Object(i.jsx)("input",{"data-cy":"filterInput",value:m,onChange:function(e){h(e.target.value),p(e.target.value.toLowerCase())},className:"input is-normal",type:"text",name:"input",placeholder:"Enter name"})}),Object(i.jsx)("div",{className:"select",children:Object(i.jsxs)("select",{className:"select",onChange:function(e){n.set("filterBy",e.target.value),s("?".concat(n.toString()))},children:[Object(i.jsx)("option",{defaultValue:"filter by",hidden:!0,children:"Filter by:"}),Object(i.jsx)("option",{value:"name",children:"Name"}),Object(i.jsx)("option",{value:"motherName",children:"Mother's Name"}),Object(i.jsx)("option",{value:"fatherName",children:"Father's Name"})]})}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"button",className:"button button-add",children:Object(i.jsx)(l.b,{to:"/people/new",children:"Add person"})})})]}),Object(i.jsx)(y,{people:e})]})},S=function(){return Object(i.jsx)("div",{children:Object(i.jsx)("h1",{className:"title",children:"Page not found"})})},B=a(4),P=a(22),F=(a(46),function(){var e=Object(o.g)(),t=Object(c.useContext)(_),a=t.people,s=t.setPeople,n=Object(P.a)({mode:"onChange"}),r=n.register,l=n.handleSubmit,d=n.getValues,j=n.reset,b=n.formState,m=b.errors,u=b.isValid,O=d(),x=(new Date).getFullYear(),f=function(e){return a.filter((function(t){return t.sex===e&&t.died>=+O.born&&t.born+18<+O.born}))};return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"add-people-container",children:[Object(i.jsx)("div",{className:"title-container",children:Object(i.jsx)("h1",{className:"title",children:"Add new person"})}),Object(i.jsx)("div",{className:"box",children:Object(i.jsxs)("form",{onSubmit:l((function(t){var c="".concat(t.name.toLowerCase().split(" ").join("-"),"-").concat(t.born),n=Object(h.a)(Object(h.a)({},t),{},{slug:c});s([].concat(Object(B.a)(a),[n])),e("/people"),j()})),children:[Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",children:Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",Object(h.a)({className:p()("input",{"is-success":O.name,"is-danger":m.name}),type:"text",placeholder:"Name"},r("name",{pattern:{value:/^[A-Za-z ]+$/i,message:"Name should contains only of letters and spaces"},required:!0})))})}),m.name&&Object(i.jsx)("p",{className:"help is-danger",children:m.name.message})]}),Object(i.jsx)("div",{className:"field is-grouped",children:Object(i.jsxs)("div",{className:"control",children:[Object(i.jsxs)("label",{className:"radio",children:[Object(i.jsx)("input",Object(h.a)({className:"input-radio",type:"radio",name:"sex",value:"m"},r("sex",{required:!0}))),"Male"]}),Object(i.jsxs)("label",{className:"radio",children:[Object(i.jsx)("input",Object(h.a)({className:"input-radio",type:"radio",name:"sex",value:"f"},r("sex",{required:!0}))),"Female"]})]})}),Object(i.jsxs)("div",{className:"field is-narrow",children:[Object(i.jsx)("label",{className:"label",children:Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",Object(h.a)({className:p()("input",{"is-success":O.born,"is-danger":m.born}),type:"number",placeholder:"Born"},r("born",{min:{value:1400,message:"Born date should be more than 1400 year"},max:{value:x,message:"Born date cannot be more than current year"},required:!0})))})}),Object(i.jsx)("label",{className:"label",children:Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("input",Object(h.a)({className:p()("input",{"is-success":O.died,"is-danger":m.died}),type:"number",placeholder:"Died",disabled:!O.born},r("died",{min:{value:O.born,message:"Died date cannot be less than born year"},max:{value:+O.born+150,message:"Died date cannot be more than current year"},required:!0})))})}),m.born&&Object(i.jsx)("p",{className:"help is-danger",children:m.born.message}),m.died&&Object(i.jsx)("p",{className:"help is-danger",children:m.died.message})]}),Object(i.jsxs)("div",{className:"field is-grouped",children:[Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("div",{className:"select",children:Object(i.jsxs)("select",Object(h.a)(Object(h.a)({disabled:!O.born},r("motherName")),{},{children:[Object(i.jsx)("option",{hidden:!0,value:"No data",children:"Select mother"}),f&&f("m").map((function(e){return e.motherName&&Object(i.jsx)("option",{children:e.motherName},e.slug)}))]}))})}),Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("div",{className:"select",children:Object(i.jsxs)("select",Object(h.a)(Object(h.a)({disabled:!O.born},r("fatherName")),{},{children:[Object(i.jsx)("option",{hidden:!0,value:"No data",children:"Select father"}),f&&f("f").map((function(e){return e.fatherName&&Object(i.jsx)("option",{children:e.fatherName},e.slug)}))]}))})})]}),Object(i.jsx)("button",{type:"submit",className:"button button-submit",disabled:!u,children:"Submit"})]})})]})})}),L=function(){return Object(i.jsx)(w,{children:Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(d,{}),Object(i.jsxs)(o.d,{children:[Object(i.jsx)(o.b,{path:"",element:Object(i.jsx)(j,{})}),Object(i.jsx)(o.b,{path:"people",element:Object(i.jsx)(C,{}),children:Object(i.jsx)(o.b,{path:":selectedSlug",element:Object(i.jsx)(C,{})})}),Object(i.jsx)(o.b,{path:"people/new",element:Object(i.jsx)(F,{})}),Object(i.jsx)(o.b,{path:"home",element:Object(i.jsx)(o.a,{to:"/"})}),Object(i.jsx)(o.b,{path:"*",element:Object(i.jsx)(S,{})})]})]})})};r.a.render(Object(i.jsx)(l.a,{children:Object(i.jsx)(L,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.f3d95012.chunk.js.map